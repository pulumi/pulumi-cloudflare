name: cloudflare_ruleset
runtime: yaml
description: A minimal Pulumi YAML program to create a Cloudflare Ruleset
config:
  pulumi:tags:
    value:
      pulumi:template: https://www.pulumi.com/ai/api/project/4949697e-2567-41de-8f02-67071aa39689.zip
resources:
  myRuleset:
    properties:
      description: Example ruleset for HTTP request transformations
      kind: zone
      name: my_example_ruleset
      phase: http_request_transform
      rules:
        - action: rewrite
          actionParameters:
            uri:
              path:
                value: /new-path
          description: Rewrite old-path to new-path
          enabled: true
          expression: (http.request.uri.path ~ "^/old-path")
      zoneId: ${myZone.zoneId}
    type: cloudflare:Ruleset
  myZone:
    properties:
      accountId: REPLACE_WITH_ACCOUNT_ID
      plan: free_plan
      zone: example.com
    type: cloudflare:Zone
