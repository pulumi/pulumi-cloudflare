// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

// nolint: lll
package cloudflare

import (
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/go/pulumi"
)

// Provides a Cloudflare Load Balancer resource. This sits in front of a number of defined pools of origins and provides various options for geographically-aware load balancing. Note that the load balancing feature must be enabled in your Clouflare account before you can use this resource.
// 
// > This content is derived from https://github.com/terraform-providers/terraform-provider-cloudflare/blob/master/website/docs/r/load_balancer.html.markdown.
type LoadBalancer struct {
	pulumi.CustomResourceState

	// The RFC3339 timestamp of when the load balancer was created.
	CreatedOn pulumi.StringOutput `pulumi:"createdOn"`
	// A list of pool IDs ordered by their failover priority. Used whenever region/pop pools are not defined.
	DefaultPoolIds pulumi.StringArrayOutput `pulumi:"defaultPoolIds"`
	// Free text description.
	Description pulumi.StringPtrOutput `pulumi:"description"`
	// Enable or disable the load balancer. Defaults to `true` (enabled).
	Enabled pulumi.BoolPtrOutput `pulumi:"enabled"`
	// The pool ID to use when all other pools are detected as unhealthy.
	FallbackPoolId pulumi.StringOutput `pulumi:"fallbackPoolId"`
	// The RFC3339 timestamp of when the load balancer was last modified.
	ModifiedOn pulumi.StringOutput `pulumi:"modifiedOn"`
	// The DNS name (FQDN, including the zone) to associate with the load balancer.
	Name pulumi.StringOutput `pulumi:"name"`
	// A set containing mappings of Cloudflare Point-of-Presence (PoP) identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). This feature is only available to enterprise customers. Fields documented below.
	PopPools LoadBalancerPopPoolArrayOutput `pulumi:"popPools"`
	// Whether the hostname gets Cloudflare's origin protection. Defaults to `false`.
	Proxied pulumi.BoolPtrOutput `pulumi:"proxied"`
	// A set containing mappings of region/country codes to a list of pool IDs (ordered by their failover priority) for the given region. Fields documented below.
	RegionPools LoadBalancerRegionPoolArrayOutput `pulumi:"regionPools"`
	// Associates all requests coming from an end-user with a single origin. Cloudflare will set a cookie on the initial response to the client, such that consequent requests with the cookie in the request will go to the same origin, so long as it is available.
	SessionAffinity pulumi.StringPtrOutput `pulumi:"sessionAffinity"`
	// Determine which method the load balancer uses to determine the fastest route to your origin. Valid values  are: `"off"`, `"geo"`, `"dynamicLatency"`, `"random"` or `""`. Default is `""`.
	SteeringPolicy pulumi.StringOutput `pulumi:"steeringPolicy"`
	// Time to live (TTL) of this load balancer's DNS `name`. Conflicts with `proxied` - this cannot be set for proxied load balancers. Default is `30`.
	Ttl pulumi.IntOutput `pulumi:"ttl"`
	// The zone ID to add the load balancer to.
	ZoneId pulumi.StringOutput `pulumi:"zoneId"`
}

// NewLoadBalancer registers a new resource with the given unique name, arguments, and options.
func NewLoadBalancer(ctx *pulumi.Context,
	name string, args *LoadBalancerArgs, opts ...pulumi.ResourceOption) (*LoadBalancer, error) {
	if args == nil || args.DefaultPoolIds == nil {
		return nil, errors.New("missing required argument 'DefaultPoolIds'")
	}
	if args == nil || args.FallbackPoolId == nil {
		return nil, errors.New("missing required argument 'FallbackPoolId'")
	}
	if args == nil || args.Name == nil {
		return nil, errors.New("missing required argument 'Name'")
	}
	if args == nil || args.ZoneId == nil {
		return nil, errors.New("missing required argument 'ZoneId'")
	}
	if args == nil {
		args = &LoadBalancerArgs{}
	}
	var resource LoadBalancer
	err := ctx.RegisterResource("cloudflare:index/loadBalancer:LoadBalancer", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetLoadBalancer gets an existing LoadBalancer resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetLoadBalancer(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *LoadBalancerState, opts ...pulumi.ResourceOption) (*LoadBalancer, error) {
	var resource LoadBalancer
	err := ctx.ReadResource("cloudflare:index/loadBalancer:LoadBalancer", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering LoadBalancer resources.
type loadBalancerState struct {
	// The RFC3339 timestamp of when the load balancer was created.
	CreatedOn *string `pulumi:"createdOn"`
	// A list of pool IDs ordered by their failover priority. Used whenever region/pop pools are not defined.
	DefaultPoolIds []string `pulumi:"defaultPoolIds"`
	// Free text description.
	Description *string `pulumi:"description"`
	// Enable or disable the load balancer. Defaults to `true` (enabled).
	Enabled *bool `pulumi:"enabled"`
	// The pool ID to use when all other pools are detected as unhealthy.
	FallbackPoolId *string `pulumi:"fallbackPoolId"`
	// The RFC3339 timestamp of when the load balancer was last modified.
	ModifiedOn *string `pulumi:"modifiedOn"`
	// The DNS name (FQDN, including the zone) to associate with the load balancer.
	Name *string `pulumi:"name"`
	// A set containing mappings of Cloudflare Point-of-Presence (PoP) identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). This feature is only available to enterprise customers. Fields documented below.
	PopPools []LoadBalancerPopPool `pulumi:"popPools"`
	// Whether the hostname gets Cloudflare's origin protection. Defaults to `false`.
	Proxied *bool `pulumi:"proxied"`
	// A set containing mappings of region/country codes to a list of pool IDs (ordered by their failover priority) for the given region. Fields documented below.
	RegionPools []LoadBalancerRegionPool `pulumi:"regionPools"`
	// Associates all requests coming from an end-user with a single origin. Cloudflare will set a cookie on the initial response to the client, such that consequent requests with the cookie in the request will go to the same origin, so long as it is available.
	SessionAffinity *string `pulumi:"sessionAffinity"`
	// Determine which method the load balancer uses to determine the fastest route to your origin. Valid values  are: `"off"`, `"geo"`, `"dynamicLatency"`, `"random"` or `""`. Default is `""`.
	SteeringPolicy *string `pulumi:"steeringPolicy"`
	// Time to live (TTL) of this load balancer's DNS `name`. Conflicts with `proxied` - this cannot be set for proxied load balancers. Default is `30`.
	Ttl *int `pulumi:"ttl"`
	// The zone ID to add the load balancer to.
	ZoneId *string `pulumi:"zoneId"`
}

type LoadBalancerState struct {
	// The RFC3339 timestamp of when the load balancer was created.
	CreatedOn pulumi.StringPtrInput
	// A list of pool IDs ordered by their failover priority. Used whenever region/pop pools are not defined.
	DefaultPoolIds pulumi.StringArrayInput
	// Free text description.
	Description pulumi.StringPtrInput
	// Enable or disable the load balancer. Defaults to `true` (enabled).
	Enabled pulumi.BoolPtrInput
	// The pool ID to use when all other pools are detected as unhealthy.
	FallbackPoolId pulumi.StringPtrInput
	// The RFC3339 timestamp of when the load balancer was last modified.
	ModifiedOn pulumi.StringPtrInput
	// The DNS name (FQDN, including the zone) to associate with the load balancer.
	Name pulumi.StringPtrInput
	// A set containing mappings of Cloudflare Point-of-Presence (PoP) identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). This feature is only available to enterprise customers. Fields documented below.
	PopPools LoadBalancerPopPoolArrayInput
	// Whether the hostname gets Cloudflare's origin protection. Defaults to `false`.
	Proxied pulumi.BoolPtrInput
	// A set containing mappings of region/country codes to a list of pool IDs (ordered by their failover priority) for the given region. Fields documented below.
	RegionPools LoadBalancerRegionPoolArrayInput
	// Associates all requests coming from an end-user with a single origin. Cloudflare will set a cookie on the initial response to the client, such that consequent requests with the cookie in the request will go to the same origin, so long as it is available.
	SessionAffinity pulumi.StringPtrInput
	// Determine which method the load balancer uses to determine the fastest route to your origin. Valid values  are: `"off"`, `"geo"`, `"dynamicLatency"`, `"random"` or `""`. Default is `""`.
	SteeringPolicy pulumi.StringPtrInput
	// Time to live (TTL) of this load balancer's DNS `name`. Conflicts with `proxied` - this cannot be set for proxied load balancers. Default is `30`.
	Ttl pulumi.IntPtrInput
	// The zone ID to add the load balancer to.
	ZoneId pulumi.StringPtrInput
}

func (LoadBalancerState) ElementType() reflect.Type {
	return reflect.TypeOf((*loadBalancerState)(nil)).Elem()
}

type loadBalancerArgs struct {
	// A list of pool IDs ordered by their failover priority. Used whenever region/pop pools are not defined.
	DefaultPoolIds []string `pulumi:"defaultPoolIds"`
	// Free text description.
	Description *string `pulumi:"description"`
	// Enable or disable the load balancer. Defaults to `true` (enabled).
	Enabled *bool `pulumi:"enabled"`
	// The pool ID to use when all other pools are detected as unhealthy.
	FallbackPoolId string `pulumi:"fallbackPoolId"`
	// The DNS name (FQDN, including the zone) to associate with the load balancer.
	Name string `pulumi:"name"`
	// A set containing mappings of Cloudflare Point-of-Presence (PoP) identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). This feature is only available to enterprise customers. Fields documented below.
	PopPools []LoadBalancerPopPool `pulumi:"popPools"`
	// Whether the hostname gets Cloudflare's origin protection. Defaults to `false`.
	Proxied *bool `pulumi:"proxied"`
	// A set containing mappings of region/country codes to a list of pool IDs (ordered by their failover priority) for the given region. Fields documented below.
	RegionPools []LoadBalancerRegionPool `pulumi:"regionPools"`
	// Associates all requests coming from an end-user with a single origin. Cloudflare will set a cookie on the initial response to the client, such that consequent requests with the cookie in the request will go to the same origin, so long as it is available.
	SessionAffinity *string `pulumi:"sessionAffinity"`
	// Determine which method the load balancer uses to determine the fastest route to your origin. Valid values  are: `"off"`, `"geo"`, `"dynamicLatency"`, `"random"` or `""`. Default is `""`.
	SteeringPolicy *string `pulumi:"steeringPolicy"`
	// Time to live (TTL) of this load balancer's DNS `name`. Conflicts with `proxied` - this cannot be set for proxied load balancers. Default is `30`.
	Ttl *int `pulumi:"ttl"`
	// The zone ID to add the load balancer to.
	ZoneId string `pulumi:"zoneId"`
}

// The set of arguments for constructing a LoadBalancer resource.
type LoadBalancerArgs struct {
	// A list of pool IDs ordered by their failover priority. Used whenever region/pop pools are not defined.
	DefaultPoolIds pulumi.StringArrayInput
	// Free text description.
	Description pulumi.StringPtrInput
	// Enable or disable the load balancer. Defaults to `true` (enabled).
	Enabled pulumi.BoolPtrInput
	// The pool ID to use when all other pools are detected as unhealthy.
	FallbackPoolId pulumi.StringInput
	// The DNS name (FQDN, including the zone) to associate with the load balancer.
	Name pulumi.StringInput
	// A set containing mappings of Cloudflare Point-of-Presence (PoP) identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). This feature is only available to enterprise customers. Fields documented below.
	PopPools LoadBalancerPopPoolArrayInput
	// Whether the hostname gets Cloudflare's origin protection. Defaults to `false`.
	Proxied pulumi.BoolPtrInput
	// A set containing mappings of region/country codes to a list of pool IDs (ordered by their failover priority) for the given region. Fields documented below.
	RegionPools LoadBalancerRegionPoolArrayInput
	// Associates all requests coming from an end-user with a single origin. Cloudflare will set a cookie on the initial response to the client, such that consequent requests with the cookie in the request will go to the same origin, so long as it is available.
	SessionAffinity pulumi.StringPtrInput
	// Determine which method the load balancer uses to determine the fastest route to your origin. Valid values  are: `"off"`, `"geo"`, `"dynamicLatency"`, `"random"` or `""`. Default is `""`.
	SteeringPolicy pulumi.StringPtrInput
	// Time to live (TTL) of this load balancer's DNS `name`. Conflicts with `proxied` - this cannot be set for proxied load balancers. Default is `30`.
	Ttl pulumi.IntPtrInput
	// The zone ID to add the load balancer to.
	ZoneId pulumi.StringInput
}

func (LoadBalancerArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*loadBalancerArgs)(nil)).Elem()
}

